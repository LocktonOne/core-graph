specVersion: 0.0.4
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ConstantsRegistry
    network: chapel
    source:
      address: "0x76e98f7d84603AEb97cd1c89A80A9e914f181679" # stub
      abi: ConstantsRegistry
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/ConstantsRegistry.ts
      entities:
        - Constant
      abis:
        - name: ConstantsRegistry
          file: ./abis/ConstantsRegistry.json
      eventHandlers:
        - event: AddedConstant(string,bytes)
          handler: onAddedConstant
        - event: RemovedConstans(string)
          handler: onRemovedConstant

  - kind: ethereum/contract
    name: RoleManagedRegistry
    network: chapel
    source:
      address: "0x76e98f7d84603AEb97cd1c89A80A9e914f181679" # stub
      abi: RoleManagedRegistry
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/RoleManagedRegistry.ts
      entities:
        - Contract
      abis:
        - name: RoleManagedRegistry
          file: ./abis/RoleManagedRegistry.json
      eventHandlers:
        - event: AddedContract(string,address,bool)
          handler: onAddedContract
        - event: RemovedContract(string)
          handler: onRemovedContract

  - kind: ethereum/contract
    name: MasterAccessManagement
    network: chapel
    source:
      address: "0x76e98f7d84603AEb97cd1c89A80A9e914f181679" # stub
      abi: MasterAccessManagement
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/MasterAccessManagement.ts
      entities:
        - User
        - Role
        - Resource
      abis:
        - name: MasterAccessManagement
          file: ./abis/MasterAccessManagement.json
      eventHandlers:
        - event: GrantedRoles(address,string[])
          handler: onGrantedRoles
        - event: RevokedRoles(address,string[])
          handler: onRevokedRoles
        - event: AddedPermissions(string,string,string[],bool)
          handler: onAddedPermissions
        - event: RemovedPermissions(string,string,string[],bool)
          handler: onRemovedPermissions

  - kind: ethereum/contract
    name: ReviewableRequests
    network: chapel
    source:
      address: "0x76e98f7d84603AEb97cd1c89A80A9e914f181679" # stub
      abi: ReviewableRequests
      startBlock: 1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/ReviewableRequests.ts
      entities:
        - Request
        - RequestsThread
      abis:
        - name: ReviewableRequests
          file: ./abis/ReviewableRequests.json
      eventHandlers:
        - event: RequestCreated(uint256,address,address,bytes,bytes,string)
          handler: onRequestCreated
        - event: RequestUpdated(uint256,uint256,address,bytes,bytes,string)
          handler: onRequestUpdated
        - event: RequestAccepted(uint256)
          handler: onRequestAccepted
        - event: RequestRejected(uint256)
          handler: onRequestRejected
        - event: RequestDropped(uint256)
          handler: onRequestDropped
